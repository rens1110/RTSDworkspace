# Makefile for model.cspm for Default target platform
# Generated by the TERRA CSPm2LUNA generator version 1.1.3
#
# protected region document description on begin
# protected region document description end

SOURCE_FILES=src/main.cpp src/MainModel.cpp src/Producer.cpp src/Producer/CPPin.cpp src/Consumer1.cpp src/Consumer1/CPPout1.cpp src/Consumer2.cpp src/Consumer2/CPPout2.cpp src/Consumer3.cpp src/Consumer3/CPPout3.cpp

# Targets are expanded a second time, just before the rule is used
.SECONDEXPANSION:

# Contains the compiler commands that were used to build LUNA
-include /home/rtsd/RTSD2016/LUNA/luna-linux-x64/lib64/../tools.mk

# Additional commands
RM=rm -rf
MKDIR=mkdir -p

# Compiler/Linker flags
LDFLAGS+=-L/home/rtsd/RTSD2016/LUNA/luna-linux-x64/lib64
CPPFLAGS+=-Iinclude -I/home/rtsd/RTSD2016/LUNA/luna-linux-x64/include
LIBS+=-lLUNA


LIBS+=-lpthread

## protected region to add additional statements on begin
# For example, use this region to add additional files that are required:
#SOURCE_FILES+=xxsim/PID/PID.cpp $(wildcard xxsim/common/*.cpp)
#CPPFLAGS+=-Ixxsim/PID -Ixxsim/common 

## protected region to add additional statements end

OBJECT_FILES=$(patsubst src/%.cpp,obj/%.o,$(SOURCE_FILES))

all: model

model: $(OBJECT_FILES)
	$(CXX) $(LDFLAGS) $^ $(LIBS) -o $@

obj/%.o: src/%.cpp | $$(@D)
	$(CXX) -c $(CPPFLAGS) -o $@ $<

clean:
	$(RM) obj lib model

# Targets for creating directories
uniq = $(strip $(if $1,$(firstword $1) $(call uniq,$(filter-out $(firstword $1),$1))))
DIRS:=$(call uniq,$(patsubst %/,%,lib/ $(dir $(OBJECT_FILES))))

define DirectoryTarget
  $(foreach directory, $(DIRS),
    $(directory):
	$(MKDIR) $(directory)
  )
endef
$(eval $(call DirectoryTarget))

# Dependencies
obj/main.o: include/MainModel.h
obj/MainModel.o: include/MainModel.h include/Consumer1.h include/Consumer2.h include/Consumer3.h include/Producer.h
obj/Producer.o: include/Producer.h include/Producer/CPPin.h
obj/Producer/CPPin.o: include/Producer/CPPin.h
obj/Consumer1.o: include/Consumer1.h include/Consumer1/CPPout1.h
obj/Consumer1/CPPout1.o: include/Consumer1/CPPout1.h
obj/Consumer2.o: include/Consumer2.h include/Consumer2/CPPout2.h
obj/Consumer2/CPPout2.o: include/Consumer2/CPPout2.h
obj/Consumer3.o: include/Consumer3.h include/Consumer3/CPPout3.h
obj/Consumer3/CPPout3.o: include/Consumer3/CPPout3.h

# protected region additional targets on begin
# protected region additional targets end